<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#1a2744">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commute Compute Multi-Device Simulator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif; background: #1a2744; color: #f1f5f9; min-height: 100vh; padding: 20px; }
        .container { max-width: 1600px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 20px; }
        header h1 { font-size: 24px; margin-bottom: 8px; }
        header p { color: #94a3b8; font-size: 14px; }
        .device-selector { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
        .device-btn { padding: 10px 16px; background: #243352; border: 1px solid #3d5278; border-radius: 4px; color: #f1f5f9; font-size: 13px; cursor: pointer; transition: border-color 0.15s; }
        .device-btn:hover { border-color: #4fb28e; }
        .device-btn.active { background: #4fb28e; border-color: #4fb28e; color: #1a2744; }
        .main-layout { display: grid; grid-template-columns: 1fr 350px; gap: 20px; }
        .display-wrapper { background: #2a3d5f; padding: 20px; border-radius: 4px; border: 1px solid #3d5278; display: flex; flex-direction: column; align-items: center; }
        .display-info { display: flex; justify-content: space-between; width: 100%; margin-bottom: 15px; font-size: 12px; color: #64748b; }
        .display-info span { background: #334155; padding: 4px 10px; border-radius: 4px; font-family: monospace; }
        #eink-display { background: #f5f5f0; border: 3px solid #1a1a1a; border-radius: 4px; position: relative; overflow: hidden; box-shadow: inset 0 0 30px rgba(0,0,0,0.08); transition: width 0.3s, height 0.3s; }
        .display-text { position: absolute; font-family: "Courier New", monospace; color: #1a1a1a; white-space: nowrap; }
        .font-large { font-size: 18px; font-weight: bold; }
        .font-medium { font-size: 14px; font-weight: bold; }
        .font-small { font-size: 11px; }
        .inverted { background: #1a1a1a; color: #f5f5f0; padding: 6px 12px; }
        .rect-box { position: absolute; border: 2px solid #1a1a1a; }
        .ghosting { opacity: 0.15; }
        .controls { background: #2a3d5f; padding: 20px; border-radius: 4px; border: 1px solid #3d5278; max-height: 700px; overflow-y: auto; }
        .controls h2 { font-size: 16px; margin-bottom: 15px; color: #4fb28e; }
        .control-section { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #334155; }
        .control-section:last-child { border-bottom: none; }
        .control-section h3 { font-size: 12px; color: #94a3b8; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .control-group { margin-bottom: 10px; }
        .control-group label { display: block; font-size: 11px; color: #64748b; margin-bottom: 3px; }
        .control-group input, .control-group select { width: 100%; padding: 8px 10px; background: #1a2744; border: 1px solid #334155; border-radius: 6px; color: #f8fafc; font-size: 13px; }
        .control-group input:focus, .control-group select:focus { outline: none; border-color: #4fb28e; }
        .button-row { display: flex; gap: 8px; margin-top: 15px; }
        button { flex: 1; padding: 10px; background: #4fb28e; border: none; border-radius: 4px; color: #1a2744; font-family: 'Space Grotesk', sans-serif; font-size: 13px; font-weight: 600; cursor: pointer; transition: background 0.15s; }
        button:hover { background: #5fcca0; }
        button.secondary { background: #3d5278; color: #f1f5f9; }
        button.secondary:hover { background: #4a6291; }
        button.warning { background: #f59e0b; }
        button.warning:hover { background: #d97706; }
        .status-bar { margin-top: 20px; background: #1e293b; padding: 12px 20px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; font-size: 12px; }
        .status-item { display: flex; align-items: center; gap: 6px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #22c55e; }
        .status-dot.refreshing { background: #f59e0b; animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .refresh-zones { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 10px; }
        .zone { padding: 5px; background: #334155; border-radius: 4px; text-align: center; font-size: 10px; cursor: pointer; }
        .zone.active { background: #4fb28e; }
        .zone.dirty { background: #f59e0b; }
        footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px solid #334155; color: #64748b; font-size: 12px; }
        
        /* Global Navigation */
        .global-nav {
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .global-nav .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: 700;
            color: #f8fafc;
            text-decoration: none;
        }
        
        .global-nav .nav-brand span:first-child { font-size: 24px; }
        
        .global-nav .nav-links {
            display: flex;
            gap: 8px;
        }
        
        .global-nav .nav-link {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #94a3b8;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }
        
        .global-nav .nav-link:hover {
            background: rgba(30, 41, 59, 0.8);
            color: #f8fafc;
            border-color: #4fb28e;
        }
        
        .global-nav .nav-link.active {
            background: #4fb28e;
            color: white;
            border-color: #4fb28e;
        }
        
        body { padding-top: 56px; }
        
        @media (max-width: 600px) {
            .global-nav .nav-links { display: none; }
        }
        
        /* Accessibility: Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #4fb28e;
            color: white;
            padding: 8px 16px;
            z-index: 1001;
            text-decoration: none;
            border-radius: 0 0 8px 0;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        /* Focus visible for keyboard navigation */
        *:focus-visible {
            outline: 2px solid #4fb28e;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Accessibility: Skip to main content -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Global Navigation -->
    <nav class="global-nav" role="navigation" aria-label="Main navigation">
        <a href="/" class="nav-brand" aria-label="Commute Compute Home">
            <img src="/assets/brand/cc-logo-128.png" alt="CC" style="height: 44px; width: auto; margin-right: 10px;">
            <span>Commute Compute</span>
        </a>
        <div class="nav-links" role="menubar">
            <a href="/" class="nav-link" role="menuitem">Dashboard</a>
            <a href="/admin.html" class="nav-link" role="menuitem">Settings</a>
            <a href="/simulator.html" class="nav-link active" role="menuitem" aria-current="page">Simulator</a>
        </div>
    </nav>

    <main id="main-content" class="container" role="main">
        <header>
            <h1>üìü Commute Compute Multi-Device Simulator</h1>
            <p>Firmware simulation with Flash ‚Üí Setup ‚Üí Boot ‚Üí Live display</p>
        </header>
        <div class="device-selector" id="device-selector"></div>
        <div class="main-layout">
            <div class="display-wrapper">
                <div class="display-info">
                    <span id="device-name">TRMNL OG</span>
                    <span id="device-res">800√ó480</span>
                    <span id="refresh-mode">FULL</span>
                    <span id="refresh-count">Refresh #0</span>
                </div>
                <div id="eink-display"></div>
            </div>
            <div class="controls">
                <h2>‚öôÔ∏è Simulator Controls</h2>
                <div class="control-section">
                    <h3>üé¨ Device Simulation</h3>
                    <div class="button-row">
                        <button onclick="simulateFlash()" style="background:#f59e0b;">‚ö° Flash Firmware</button>
                    </div>
                    <div class="button-row">
                        <button onclick="simulateSetup()" class="secondary">üìù Setup Wizard</button>
                        <button onclick="simulateBoot()" class="secondary">üîÑ Boot Only</button>
                    </div>
                </div>
                <div class="control-section">
                    <h3>üîÑ Refresh</h3>
                    <div class="button-row">
                        <button onclick="doFullRefresh()">Full Refresh</button>
                        <button class="secondary" onclick="doPartialRefresh()">Partial</button>
                    </div>
                </div>
                <div class="control-section">
                    <h3>üìç Content</h3>
                    <div class="control-group"><label for="input-location">Location</label><input type="text" id="input-location" value="South Yarra, VIC" oninput="updateDisplay()"></div>
                    <div class="control-group"><label for="input-time">Time</label><input type="text" id="input-time" value="08:15" oninput="updateDisplay()"></div>
                </div>
            </div>
        </div>
        <div class="status-bar" role="status" aria-live="polite">
            <div class="status-item"><div class="status-dot" id="status-dot" aria-hidden="true"></div><span id="status-text">Ready</span></div>
            <div class="status-item"><span id="device-ppi">--</span></div>
            <div class="status-item"><span>v5.18</span></div>
        </div>
        <footer role="contentinfo">Commute Compute Simulator ‚Ä¢ ¬© 2026 Angus Bergman ‚Ä¢ CC BY-NC 4.0</footer>
    </main>
    <script>
        const DEVICES={"trmnl-og":{name:"TRMNL OG",width:800,height:480,ppi:150,orientation:"landscape"}};
        let currentDevice="trmnl-og",refreshCount=0,partialCount=0,ghostElements=[];
        function getScale(d){return Math.min(800/d.width,600/d.height,1);}
        function initDeviceSelector(){const c=document.getElementById("device-selector");c.innerHTML="";Object.entries(DEVICES).forEach(([id,d])=>{const b=document.createElement("button");b.className="device-btn"+(id===currentDevice?" active":"");b.textContent=d.name;b.onclick=()=>selectDevice(id);c.appendChild(b);});}
        function selectDevice(id){currentDevice=id;initDeviceSelector();updateDisplay();updateDeviceInfo();}
        function updateDeviceInfo(){const d=DEVICES[currentDevice];document.getElementById("device-name").textContent=d.name;document.getElementById("device-res").textContent=d.width+"√ó"+d.height;document.getElementById("device-ppi").textContent=d.ppi+" PPI";}
        function updateDisplay(){const d=DEVICES[currentDevice],display=document.getElementById("eink-display"),scale=getScale(d);display.style.width=(d.width*scale)+"px";display.style.height=(d.height*scale)+"px";display.style.background="#f5f5f0";display.innerHTML="";const loc=document.getElementById("input-location").value,time=document.getElementById("input-time").value;addText(display,20,25,"Commute Compute ‚Ä¢ "+loc,"font-large",scale);addText(display,d.width-100,25,time,"font-large",scale);addLine(display,0,55,d.width,55,scale);addText(display,20,80,"Ready - Click Flash Firmware to begin","font-medium",scale);addText(display,20,d.height-30,"Refresh #"+refreshCount,"font-small",scale);}
        function addText(p,x,y,t,f,s,inv=false){const e=document.createElement("div");e.className="display-text "+f+(inv?" inverted":"");e.style.left=(x*s)+"px";e.style.top=(y*s)+"px";e.style.transform="scale("+s+")";e.style.transformOrigin="top left";e.textContent=t;p.appendChild(e);}
        function addLine(p,x1,y1,x2,y2,s){const e=document.createElement("div");e.style.position="absolute";e.style.left=(x1*s)+"px";e.style.top=(y1*s)+"px";e.style.width=((x2-x1)*s)+"px";e.style.height="1px";e.style.background="#1a1a1a";p.appendChild(e);}
        function doFullRefresh(){const d=document.getElementById("eink-display"),dot=document.getElementById("status-dot");dot.classList.add("refreshing");d.style.background="#1a1a1a";setTimeout(()=>{d.style.background="#f5f5f0";refreshCount++;document.getElementById("refresh-count").textContent="Refresh #"+refreshCount;dot.classList.remove("refreshing");renderV11Journey();},400);}
        function doPartialRefresh(){refreshCount++;document.getElementById("refresh-count").textContent="Refresh #"+refreshCount;renderV11Journey();}
                function renderV11Journey(){
            const d=DEVICES[currentDevice],display=document.getElementById("eink-display"),s=getScale(d);
            const dot=document.getElementById("status-dot"),st=document.getElementById("status-text");
            dot.classList.remove("refreshing");
            st.textContent="V11 Dashboard";
            refreshCount++;
            document.getElementById("refresh-count").textContent="Refresh #"+refreshCount;
            display.style.width=(d.width*s)+"px";
            display.style.height=(d.height*s)+"px";
            display.style.background="#f5f5f0";
            display.innerHTML=`
            <div style="position:relative;width:100%;height:100%;font-family:-apple-system,BlinkMacSystemFont,sans-serif;color:#000;">
                <!-- Header -->
                <div style="position:absolute;left:${16*s}px;top:${8*s}px;font-size:${11*s}px;">68 Cambridge St, Collingwood</div>
                <div style="position:absolute;left:${16*s}px;top:${28*s}px;font-size:${64*s}px;font-weight:800;">7:32</div>
                <div style="position:absolute;left:${130*s}px;top:${70*s}px;font-size:${18*s}px;font-weight:600;">AM</div>
                <div style="position:absolute;left:${280*s}px;top:${32*s}px;font-size:${20*s}px;font-weight:700;">TUESDAY</div>
                <div style="position:absolute;left:${280*s}px;top:${56*s}px;font-size:${16*s}px;">28 January</div>
                <!-- Weather Box -->
                <div style="position:absolute;right:${16*s}px;top:${16*s}px;width:${144*s}px;height:${80*s}px;border:2px solid #000;">
                    <div style="padding:${8*s}px;">
                        <div style="font-size:${36*s}px;font-weight:700;">21¬∞</div>
                        <div style="font-size:${12*s}px;">Clear</div>
                        <div style="margin-top:${4*s}px;border:1px solid #000;padding:${2*s}px ${8*s}px;font-size:${10*s}px;text-align:center;">NO UMBRELLA</div>
                    </div>
                </div>
                <!-- Status Bar -->
                <div style="position:absolute;left:0;top:${100*s}px;width:100%;height:${28*s}px;background:#000;display:flex;align-items:center;justify-content:space-between;padding:0 ${16*s}px;box-sizing:border-box;">
                    <div style="color:#fff;font-size:${14*s}px;font-weight:600;">LEAVE NOW ‚Üí Arrive 8:14</div>
                    <div style="color:#fff;font-size:${14*s}px;font-weight:700;">42 min</div>
                </div>
                <!-- Journey Legs -->
                <div style="position:absolute;left:${16*s}px;top:${140*s}px;right:${16*s}px;">
                    <!-- Leg 1: Walk to Tram -->
                    <div style="display:flex;align-items:center;border:2px solid #000;padding:${10*s}px;margin-bottom:${8*s}px;background:#fff;">
                        <div style="width:${24*s}px;height:${24*s}px;background:#000;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:${14*s}px;">1</div>
                        <div style="font-size:${20*s}px;margin:0 ${12*s}px;">üö∂</div>
                        <div style="flex:1;">
                            <div style="font-size:${14*s}px;font-weight:700;">Walk to Tram Stop</div>
                            <div style="font-size:${11*s}px;color:#666;">Smith St / Johnston St</div>
                        </div>
                        <div style="background:#000;color:#fff;padding:${8*s}px ${12*s}px;text-align:center;">
                            <div style="font-size:${20*s}px;font-weight:800;">5</div>
                            <div style="font-size:${9*s}px;">MIN</div>
                        </div>
                    </div>
                    <!-- Arrow -->
                    <div style="text-align:center;font-size:${16*s}px;margin:${4*s}px 0;">‚ñº</div>
                    <!-- Leg 2: Tram 86 -->
                    <div style="display:flex;align-items:center;border:2px solid #000;padding:${10*s}px;margin-bottom:${8*s}px;background:#fff;">
                        <div style="width:${24*s}px;height:${24*s}px;background:#000;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:${14*s}px;">2</div>
                        <div style="font-size:${20*s}px;margin:0 ${12*s}px;">üöä</div>
                        <div style="flex:1;">
                            <div style="font-size:${14*s}px;font-weight:700;">Tram 86 ‚Üí Bourke St</div>
                            <div style="font-size:${11*s}px;color:#666;">Departs 7:41 ‚Ä¢ 8 stops</div>
                        </div>
                        <div style="background:#000;color:#fff;padding:${8*s}px ${12*s}px;text-align:center;">
                            <div style="font-size:${20*s}px;font-weight:800;">18</div>
                            <div style="font-size:${9*s}px;">MIN</div>
                        </div>
                    </div>
                    <!-- Arrow -->
                    <div style="text-align:center;font-size:${16*s}px;margin:${4*s}px 0;">‚ñº</div>
                    <!-- Leg 3: Coffee -->
                    <div style="display:flex;align-items:center;border:2px solid #000;padding:${10*s}px;margin-bottom:${8*s}px;background:#fff;">
                        <div style="width:${24*s}px;height:${24*s}px;background:#000;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:${14*s}px;">3</div>
                        <div style="font-size:${20*s}px;margin:0 ${12*s}px;">‚òï</div>
                        <div style="flex:1;">
                            <div style="font-size:${14*s}px;font-weight:700;">Coffee at Proud Mary</div>
                            <div style="font-size:${11*s}px;color:#666;">172 Oxford St ‚Ä¢ 2 min detour</div>
                        </div>
                        <div style="background:#000;color:#fff;padding:${8*s}px ${12*s}px;text-align:center;">
                            <div style="font-size:${20*s}px;font-weight:800;">8</div>
                            <div style="font-size:${9*s}px;">MIN</div>
                        </div>
                    </div>
                    <!-- Arrow -->
                    <div style="text-align:center;font-size:${16*s}px;margin:${4*s}px 0;">‚ñº</div>
                    <!-- Leg 4: Walk to Work -->
                    <div style="display:flex;align-items:center;border:2px solid #000;padding:${10*s}px;background:#fff;">
                        <div style="width:${24*s}px;height:${24*s}px;background:#000;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:${14*s}px;">4</div>
                        <div style="font-size:${20*s}px;margin:0 ${12*s}px;">üö∂</div>
                        <div style="flex:1;">
                            <div style="font-size:${14*s}px;font-weight:700;">Walk to 80 Collins St</div>
                            <div style="font-size:${11*s}px;color:#666;">Final destination</div>
                        </div>
                        <div style="background:#000;color:#fff;padding:${8*s}px ${12*s}px;text-align:center;">
                            <div style="font-size:${20*s}px;font-weight:800;">6</div>
                            <div style="font-size:${9*s}px;">MIN</div>
                        </div>
                    </div>
                </div>
                <!-- Footer -->
                <div style="position:absolute;left:0;bottom:0;width:100%;height:${28*s}px;background:#000;display:flex;align-items:center;justify-content:space-between;padding:0 ${16*s}px;box-sizing:border-box;">
                    <div style="color:#fff;font-size:${14*s}px;font-weight:700;">80 Collins St, Melbourne</div>
                    <div style="color:#fff;font-size:${11*s}px;">ARRIVE <span style="font-size:${20*s}px;font-weight:800;margin-left:${8*s}px;">8:14</span></div>
                </div>
            </div>`;
        }

        function simulateFlash(){const d=document.getElementById("eink-display"),dev=DEVICES[currentDevice],s=getScale(dev),dot=document.getElementById("status-dot"),st=document.getElementById("status-text");refreshCount=0;partialCount=0;dot.classList.add("refreshing");d.style.background="#000";d.innerHTML='<div style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:monospace;color:#0f0;"><div style="font-size:'+(24*s)+'px;color:#fff;margin-bottom:'+(25*s)+'px;">‚ö° FIRMWARE FLASH</div><div style="width:'+(500*s)+'px;height:'+(25*s)+'px;background:#222;border:2px solid #0f0;border-radius:4px;overflow:hidden;margin-bottom:'+(12*s)+'px;"><div id="flash-progress" style="width:0%;height:100%;background:linear-gradient(90deg,#0a0,#0f0);transition:width 0.3s;"></div></div><div id="flash-text" style="font-size:'+(14*s)+'px;color:#0f0;">Initializing...</div><div style="font-size:'+(10*s)+'px;color:#666;margin-top:'+(15*s)+'px;">DO NOT DISCONNECT DEVICE</div></div>';st.textContent="Flashing firmware...";const steps=[{pct:10,text:"Erasing flash memory...",delay:400},{pct:25,text:"Writing bootloader...",delay:500},{pct:40,text:"Writing firmware_main...",delay:600},{pct:55,text:"Writing firmware_backup...",delay:500},{pct:70,text:"Writing config partition...",delay:400},{pct:85,text:"Verifying checksums...",delay:500},{pct:100,text:"Flash complete!",delay:300}];let i=0;function next(){if(i>=steps.length){setTimeout(()=>simulateSetup(),800);return;}const step=steps[i++];document.getElementById("flash-progress").style.width=step.pct+"%";document.getElementById("flash-text").textContent="Flashing Commute Compute v5.18 ... "+step.pct+"%";st.textContent=step.text;setTimeout(next,step.delay);}next();}
        function simulateSetup(){const d=document.getElementById("eink-display"),dev=DEVICES[currentDevice],s=getScale(dev),st=document.getElementById("status-text");d.style.background="#fff";d.innerHTML='<div style="width:100%;height:100%;padding:'+(30*s)+'px;font-family:-apple-system,sans-serif;color:#000;"><div style="font-size:'+(28*s)+'px;font-weight:800;margin-bottom:'+(8*s)+'px;">üöÉ Commute Compute Setup</div><div style="font-size:'+(12*s)+'px;color:#666;margin-bottom:'+(25*s)+'px;">Configure your smart transit display</div><div style="background:#f5f5f5;border:2px solid #000;padding:'+(15*s)+'px;margin-bottom:'+(15*s)+'px;"><div style="font-size:'+(11*s)+'px;font-weight:700;margin-bottom:'+(8*s)+'px;">üìç HOME ADDRESS</div><div style="background:#fff;border:1px solid #ccc;padding:'+(10*s)+'px;font-size:'+(13*s)+'px;" id="setup-home">Detecting location...</div></div><div style="background:#f5f5f5;border:2px solid #000;padding:'+(15*s)+'px;margin-bottom:'+(15*s)+'px;"><div style="font-size:'+(11*s)+'px;font-weight:700;margin-bottom:'+(8*s)+'px;">üè¢ WORK ADDRESS</div><div style="background:#fff;border:1px solid #ccc;padding:'+(10*s)+'px;font-size:'+(13*s)+'px;" id="setup-work">Waiting...</div></div><div style="background:#f5f5f5;border:2px solid #000;padding:'+(15*s)+'px;"><div style="font-size:'+(11*s)+'px;font-weight:700;margin-bottom:'+(8*s)+'px;">‚òï COFFEE STOP</div><div style="background:#fff;border:1px solid #ccc;padding:'+(10*s)+'px;font-size:'+(13*s)+'px;" id="setup-coffee">Optional</div></div><div style="display:flex;gap:'+(10*s)+'px;margin-top:'+(20*s)+'px;"><div style="flex:1;background:#000;color:#fff;padding:'+(12*s)+'px;text-align:center;font-weight:700;font-size:'+(13*s)+'px;">‚Üê BACK</div><div style="flex:2;background:#4fb28e;color:#fff;padding:'+(12*s)+'px;text-align:center;font-weight:700;font-size:'+(13*s)+'px;">CONTINUE ‚Üí</div></div></div>';st.textContent="Setup wizard...";setTimeout(()=>{document.getElementById("setup-home").textContent="68 Cambridge St, Collingwood VIC 3066";st.textContent="Home configured";},600);setTimeout(()=>{document.getElementById("setup-work").textContent="80 Collins St, Melbourne VIC 3000";st.textContent="Work configured";},1200);setTimeout(()=>{document.getElementById("setup-coffee").textContent="Proud Mary, 172 Oxford St";st.textContent="Setup complete!";},1800);setTimeout(()=>simulateBoot(),2500);}
        function simulateBoot(){const d=document.getElementById("eink-display"),dev=DEVICES[currentDevice],s=getScale(dev),dot=document.getElementById("status-dot"),st=document.getElementById("status-text");d.style.background="#000";d.innerHTML='<div style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:-apple-system,sans-serif;color:#fff;"><div style="font-size:'+(48*s)+'px;margin-bottom:'+(15*s)+'px;">üöÉ</div><div style="font-size:'+(24*s)+'px;font-weight:800;margin-bottom:'+(8*s)+'px;">Commute Compute</div><div style="font-size:'+(12*s)+'px;color:#888;margin-bottom:'+(30*s)+'px;">Smart Transit Display</div><div style="display:flex;gap:'+(8*s)+'px;margin-bottom:'+(20*s)+'px;"><div style="width:'+(10*s)+'px;height:'+(10*s)+'px;background:#fff;border-radius:50%;animation:bootPulse 1.5s infinite;"></div><div style="width:'+(10*s)+'px;height:'+(10*s)+'px;background:#fff;border-radius:50%;animation:bootPulse 1.5s infinite 0.2s;"></div><div style="width:'+(10*s)+'px;height:'+(10*s)+'px;background:#fff;border-radius:50%;animation:bootPulse 1.5s infinite 0.4s;"></div></div><div id="boot-status" style="font-size:'+(11*s)+'px;color:#666;">Initializing...</div><div style="position:absolute;bottom:'+(25*s)+'px;font-size:'+(10*s)+'px;color:#444;">v5.18 ‚Ä¢ E-Ink '+dev.width+'√ó'+dev.height+'</div></div><style>@keyframes bootPulse{0%,100%{opacity:0.3;transform:scale(0.8);}50%{opacity:1;transform:scale(1);}}</style>';st.textContent="Booting...";const steps=[{text:"Connecting to WiFi...",delay:800},{text:"WiFi connected ‚úì",delay:500},{text:"Connecting to PTV OpenData API...",delay:700},{text:"Fetching real-time departures...",delay:600},{text:"Loading journey data...",delay:500},{text:"Display ready!",delay:400}];let i=0;function next(){if(i>=steps.length){dot.classList.remove("refreshing");st.textContent="Ready";setTimeout(()=>renderV11Journey(),600);return;}const step=steps[i++];document.getElementById("boot-status").textContent=step.text;st.textContent=step.text;setTimeout(next,step.delay);}next();}
        initDeviceSelector();updateDeviceInfo();updateDisplay();
    </script>
    
    <!-- Footer -->
    <footer style="background: #1e293b; border-top: 1px solid rgba(255,255,255,0.1); padding: 20px; margin-top: 30px; text-align: center; font-size: 13px; color: #94a3b8;">
        <div style="margin-bottom: 12px;">
            <strong>Data:</strong>
            <a href="https://opendata.transport.vic.gov.au" target="_blank" rel="noopener" style="color: #94a3b8;">Transport Victoria OpenData</a> (CC BY 4.0) ‚Ä¢
            <a href="/attribution.html" style="color: #94a3b8;">All Sources</a>
        </div>
        <div style="display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-bottom: 12px;">
            <a href="https://buymeacoffee.com/angusbergman" target="_blank" rel="noopener" 
               style="padding: 6px 14px; background: #FFDD00; color: #000; border-radius: 6px; text-decoration: none; font-weight: 500; font-size: 12px;">
                ‚òï Buy me a coffee
            </a>
            <a href="https://github.com/sponsors/angusbergman17-cpu" target="_blank" rel="noopener"
               style="padding: 6px 14px; background: #db61a2; color: #fff; border-radius: 6px; text-decoration: none; font-weight: 500; font-size: 12px;">
                üíñ Sponsor
            </a>
            <a href="https://github.com/angusbergman17-cpu/einkptdashboard/issues/new" target="_blank" rel="noopener"
               style="padding: 6px 14px; background: #4fb28e; color: #fff; border-radius: 6px; text-decoration: none; font-weight: 500; font-size: 12px;">
                üìù Feedback
            </a>
        </div>
        <div style="font-size: 11px;">
            ¬© 2025-2026 <a href="https://github.com/angusbergman17-cpu" target="_blank" rel="noopener" style="color: #94a3b8;">Angus Bergman</a> ‚Ä¢
            <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener" style="color: #94a3b8;">CC BY-NC 4.0</a>
        </div>
    </footer>
</body>
</html>
